{"version":3,"file":"sourcemap-codec.es6.js","sources":["../src/sourcemap-codec.js","../node_modules/vlq/src/vlq.js"],"sourcesContent":["import { decode as decodeVlq, encode as encodeVlq } from 'vlq';\n\nfunction decodeSegments ( encodedSegments ) {\n\tlet i = encodedSegments.length;\n\tlet segments = new Array( i );\n\n\twhile ( i-- ) segments[i] = decodeVlq( encodedSegments[i] );\n\treturn segments;\n}\n\nexport function decode ( mappings ) {\n\tlet sourceFileIndex = 0;   // second field\n\tlet sourceCodeLine = 0;    // third field\n\tlet sourceCodeColumn = 0;  // fourth field\n\tlet nameIndex = 0;         // fifth field\n\n\tlet lines = mappings.split( ';' );\n\tlet numLines = lines.length;\n\tlet decoded = new Array( numLines );\n\n\tlet i;\n\tlet j;\n\tlet line;\n\tlet generatedCodeColumn;\n\tlet decodedLine;\n\tlet segments;\n\tlet segment;\n\tlet result;\n\n\tfor ( i = 0; i < numLines; i += 1 ) {\n\t\tline = lines[i];\n\n\t\tgeneratedCodeColumn = 0; // first field - reset each time\n\t\tdecodedLine = [];\n\n\t\tsegments = decodeSegments( line.split( ',' ) );\n\n\t\tfor ( j = 0; j < segments.length; j += 1 ) {\n\t\t\tsegment = segments[j];\n\n\t\t\tif ( !segment.length ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tgeneratedCodeColumn += segment[0];\n\n\t\t\tresult = [ generatedCodeColumn ];\n\t\t\tdecodedLine.push( result );\n\n\t\t\tif ( segment.length === 1 ) {\n\t\t\t\t// only one field!\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tsourceFileIndex  += segment[1];\n\t\t\tsourceCodeLine   += segment[2];\n\t\t\tsourceCodeColumn += segment[3];\n\n\t\t\tresult.push( sourceFileIndex, sourceCodeLine, sourceCodeColumn );\n\n\t\t\tif ( segment.length === 5 ) {\n\t\t\t\tnameIndex += segment[4];\n\t\t\t\tresult.push( nameIndex );\n\t\t\t}\n\t\t}\n\n\t\tdecoded[i] = decodedLine;\n\t}\n\n\treturn decoded;\n}\n\nexport function encode ( decoded ) {\n\tlet offsets = {\n\t\tgeneratedCodeColumn: 0,\n\t\tsourceFileIndex: 0,   // second field\n\t\tsourceCodeLine: 0,    // third field\n\t\tsourceCodeColumn: 0,  // fourth field\n\t\tnameIndex: 0          // fifth field\n\t};\n\n\treturn decoded.map( line => {\n\t\toffsets.generatedCodeColumn = 0; // first field - reset each time\n\t\treturn line.map( encodeSegment ).join( ',' );\n\t}).join( ';' );\n\n\tfunction encodeSegment ( segment ) {\n\t\tif ( !segment.length ) {\n\t\t\treturn segment;\n\t\t}\n\n\t\tlet result = new Array( segment.length );\n\n\t\tresult[0] = segment[0] - offsets.generatedCodeColumn;\n\t\toffsets.generatedCodeColumn = segment[0];\n\n\t\tif ( segment.length === 1 ) {\n\t\t\t// only one field!\n\t\t\treturn encodeVlq( result );\n\t\t}\n\n\t\tresult[1] = segment[1] - offsets.sourceFileIndex;\n\t\tresult[2] = segment[2] - offsets.sourceCodeLine;\n\t\tresult[3] = segment[3] - offsets.sourceCodeColumn;\n\n\t\toffsets.sourceFileIndex  = segment[1];\n\t\toffsets.sourceCodeLine   = segment[2];\n\t\toffsets.sourceCodeColumn = segment[3];\n\n\t\tif ( segment.length === 5 ) {\n\t\t\tresult[4] = segment[4] - offsets.nameIndex;\n\t\t\toffsets.nameIndex = segment[4];\n\t\t}\n\n\t\treturn encodeVlq( result );\n\t}\n}\n","var charToInteger = {};\nvar integerToChar = {};\n\n'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.split( '' ).forEach( function ( char, i ) {\n\tcharToInteger[ char ] = i;\n\tintegerToChar[ i ] = char;\n});\n\nexport function decode ( string ) {\n\tvar result = [],\n\t\tlen = string.length,\n\t\ti,\n\t\thasContinuationBit,\n\t\tshift = 0,\n\t\tvalue = 0,\n\t\tinteger,\n\t\tshouldNegate;\n\n\tfor ( i = 0; i < len; i += 1 ) {\n\t\tinteger = charToInteger[ string[i] ];\n\n\t\tif ( integer === undefined ) {\n\t\t\tthrow new Error( 'Invalid character (' + string[i] + ')' );\n\t\t}\n\n\t\thasContinuationBit = integer & 32;\n\n\t\tinteger &= 31;\n\t\tvalue += integer << shift;\n\n\t\tif ( hasContinuationBit ) {\n\t\t\tshift += 5;\n\t\t} else {\n\t\t\tshouldNegate = value & 1;\n\t\t\tvalue >>= 1;\n\n\t\t\tresult.push( shouldNegate ? -value : value );\n\n\t\t\t// reset\n\t\t\tvalue = shift = 0;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function encode ( value ) {\n\tvar result, i;\n\n\tif ( typeof value === 'number' ) {\n\t\tresult = encodeInteger( value );\n\t} else {\n\t\tresult = '';\n\t\tfor ( i = 0; i < value.length; i += 1 ) {\n\t\t\tresult += encodeInteger( value[i] );\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction encodeInteger ( num ) {\n\tvar result = '', clamped;\n\n\tif ( num < 0 ) {\n\t\tnum = ( -num << 1 ) | 1;\n\t} else {\n\t\tnum <<= 1;\n\t}\n\n\tdo {\n\t\tclamped = num & 31;\n\t\tnum >>= 5;\n\n\t\tif ( num > 0 ) {\n\t\t\tclamped |= 32;\n\t\t}\n\n\t\tresult += integerToChar[ clamped ];\n\t} while ( num > 0 );\n\n\treturn result;\n}\n"],"names":[],"mappings":"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"}